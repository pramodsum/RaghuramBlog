<script>
  var loadRecentPosts = function(amount, cb) {
    var rss = $('link[type="application/rss+xml"]').attr('href');
    $.get(rss, function(data) {
      var parsed = $.parseXML(data);
      // Only display the first number of posts (defined by amount)
      var posts = $(data).find('item').slice(0, amount);
      var recent = [];
      // Loop posts
      for (var i = 0; posts && i < posts.length; i++) {
        var post = posts.eq(i);
        recent.push({
          title: post.find('title').text(),
          link: post.find('link').text(),
          date: post.find('pubDate').text()
        });
      }
      cb(recent);
    });
  };
  // Gets called on document ready
  $(function() {
    // Display 5 posts
    loadRecentPosts(5, function(posts) {
      for (var i = 0; i < posts.length; i++) {
        var post = posts[i];
        // Post is an object with a title, link and date property
        // Create a wrapper with jQuery and append/insert anywhere
        $("#latest-posts").append("<li><a href=\"" + post.link + "\">" + post.title + "</a></li>");
      }
    });
  });
</script>

{{!-- RECENT POSTS --}}
<h3 id="latest-title">Latest Posts</h3>
<div id="latest-posts"></div>

<hr>

{{!-- SEARCH --}}
<form>
  <input class="u-full-width" id="search-field" placeholder="Find a Post"/>
  <input id="search-submit" type="submit" class="btn btn-default" value="SEARCH">
</form>

<script>
$("#search-field").ghostHunter({
    results         : "#results",
    onKeyUp         : true
});
</script>

<div id="results"></div>

<div class="fb-page" data-href="https://www.facebook.com/pages/Yoga-Bharati/128483263278" data-small-header="false" data-adapt-container-width="true" data-hide-cover="false" data-show-facepile="true" data-show-posts="true"><div class="fb-xfbml-parse-ignore"><blockquote cite="https://www.facebook.com/pages/Yoga-Bharati/128483263278"><a href="https://www.facebook.com/pages/Yoga-Bharati/128483263278">Yoga Bharati</a></blockquote></div></div>
